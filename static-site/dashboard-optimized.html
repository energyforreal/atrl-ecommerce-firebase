<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Business Dashboard | ATTRAL E-commerce</title>
  <meta name="description" content="Real-time business dashboard for ATTRAL e-commerce management" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
      <h1 class="dashboard-title">📊 Business Dashboard</h1>
      <p class="dashboard-subtitle">Real-time insights and management for ATTRAL E-commerce</p>
      <div class="live-indicator">
        <div class="live-dot"></div>
        <span>Live Data</span>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <a href="admin-dashboard.html" class="quick-action">
        <div class="quick-action-icon">⚙️</div>
        <h3 class="quick-action-title">Admin Panel</h3>
        <p class="quick-action-desc">Access full admin controls</p>
      </a>
      <a href="admin-messages.html" class="quick-action">
        <div class="quick-action-icon">💬</div>
        <h3 class="quick-action-title">Messages</h3>
        <p class="quick-action-desc">Manage customer inquiries</p>
      </a>
      <a href="#" class="quick-action" onclick="openProductManager()">
        <div class="quick-action-icon">🛍️</div>
        <h3 class="quick-action-title">Add Product</h3>
        <p class="quick-action-desc">Add new products to store</p>
      </a>
      <a href="affiliate-dashboard.html" class="quick-action">
        <div class="quick-action-icon">🤝</div>
        <h3 class="quick-action-title">Affiliates</h3>
        <p class="quick-action-desc">Manage affiliate program</p>
      </a>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <h3 class="stat-title">Pending Orders Today</h3>
          <span class="stat-icon">⏳</span>
        </div>
        <div class="stat-value" id="pending-orders-today">0</div>
        <div class="stat-change">
          <span class="trend-up">↑ 12%</span>
          <span>from yesterday</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <h3 class="stat-title">Shipped This Month</h3>
          <span class="stat-icon">🚚</span>
        </div>
        <div class="stat-value" id="shipped-orders-month">0</div>
        <div class="stat-change">
          <span class="trend-up">↑ 8%</span>
          <span>from last month</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <h3 class="stat-title">Revenue Today</h3>
          <span class="stat-icon">💰</span>
        </div>
        <div class="stat-value" id="revenue-today">₹0</div>
        <div class="stat-change">
          <span class="trend-up">↑ 15%</span>
          <span>from yesterday</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-header">
          <h3 class="stat-title">Total Affiliates</h3>
          <span class="stat-icon">🤝</span>
        </div>
        <div class="stat-value" id="total-affiliates">0</div>
        <div class="stat-change">
          <span class="trend-up">↑ 5%</span>
          <span>this week</span>
        </div>
      </div>
    </div>

    <!-- Content Grid -->
    <div class="content-grid">
      <!-- Recent Orders -->
      <div class="content-card">
        <div class="card-header">
          <h3 class="card-title">📦 Recent Orders</h3>
          <button class="card-action" onclick="refreshOrders()">Refresh</button>
        </div>
        <div id="recent-orders">
          <div class="loading">
            <div class="loading-spinner"></div>
            <span>Loading orders...</span>
          </div>
        </div>
      </div>

      <!-- Top Products -->
      <div class="content-card">
        <div class="card-header">
          <h3 class="card-title">🛍️ Top Products</h3>
          <button class="card-action" onclick="refreshProducts()">Refresh</button>
        </div>
        <div id="top-products">
          <div class="loading">
            <div class="loading-spinner"></div>
            <span>Loading products...</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Messages -->
    <div class="content-card">
      <div class="card-header">
        <h3 class="card-title">💬 Recent Messages</h3>
        <button class="card-action" onclick="refreshMessages()">Refresh</button>
      </div>
      <div id="recent-messages">
        <div class="loading">
          <div class="loading-spinner"></div>
          <span>Loading messages...</span>
        </div>
      </div>
    </div>

    <!-- Fulfillment Section -->
    <div class="content-card" style="margin-bottom: 2rem;">
      <div class="card-header">
        <h3 class="card-title">📦 Order Fulfillment <span style="font-weight:600; font-size:0.95rem; color:#6b7280; margin-left:8px;">Track and manage shipping statuses</span></h3>
        <button class="card-action" onclick="refreshFulfillment()">Refresh</button>
      </div>
      <div id="fulfillment-content">
        <div class="loading">
          <div class="loading-spinner"></div>
          <span>Loading fulfillment data...</span>
        </div>
      </div>
    </div>

    <!-- Affiliate Monitoring -->
    <div class="content-card" style="margin-bottom: 2rem;">
      <div class="card-header">
        <h3 class="card-title">🤝 Affiliate Monitoring</h3>
        <div style="display:flex; gap: 8px;">
          <button class="card-action" onclick="refreshAffiliates()">Refresh</button>
          <a class="card-action" href="admin-affiliate-sync.html">Open Affiliate Sync Dashboard</a>
        </div>
      </div>
      <div id="affiliates-content">
        <div class="loading">
          <div class="loading-spinner"></div>
          <span>Loading affiliates...</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Management Modal -->
  <div id="productModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🛍️ Add New Product</h2>
        <span class="close" onclick="closeProductManager()">&times;</span>
      </div>
      <div class="modal-body">
        <form id="productForm">
          <div class="form-group">
            <label for="productTitle">Product Title *</label>
            <input type="text" id="productTitle" name="title" required>
          </div>
          <div class="form-group">
            <label for="productPrice">Price (₹) *</label>
            <input type="number" id="productPrice" name="price" required>
          </div>
          <div class="form-group">
            <label for="productDescription">Description *</label>
            <textarea id="productDescription" name="description" rows="3" required></textarea>
          </div>
          <div class="form-group">
            <label for="productCategory">Category</label>
            <select id="productCategory" name="category">
              <option value="Electronics">Electronics</option>
              <option value="Accessories">Accessories</option>
              <option value="Power Solutions">Power Solutions</option>
            </select>
          </div>
          <div class="form-group">
            <label for="productImage">Image URL</label>
            <input type="url" id="productImage" name="image" placeholder="https://example.com/image.jpg">
          </div>
          <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="closeProductManager()">Cancel</button>
            <button type="submit" class="btn-primary">Add Product</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Tracking ID Modal -->
  <div id="trackingModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>📦 Add Tracking ID</h2>
        <span class="close" onclick="closeTrackingModal()">&times;</span>
      </div>
      <div class="modal-body">
        <form id="trackingForm">
          <div class="form-group">
            <label for="orderId">Order ID</label>
            <input type="text" id="orderId" name="orderId" readonly>
          </div>
          <div class="form-group">
            <label for="customerName">Customer Name</label>
            <input type="text" id="customerName" name="customerName" readonly>
          </div>
          <div class="form-group">
            <label for="trackingId">Tracking ID *</label>
            <input type="text" id="trackingId" name="trackingId" required placeholder="Enter tracking ID">
          </div>
          <div class="form-group">
            <label for="courierName">Courier Service *</label>
            <input type="text" id="courierName" name="courierName" required placeholder="e.g., Blue Dart, DTDC">
          </div>
          <div class="form-group">
            <label for="shippingNotes">Shipping Notes</label>
            <textarea id="shippingNotes" name="shippingNotes" rows="3" placeholder="Additional notes for customer"></textarea>
          </div>
          <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="closeTrackingModal()">Cancel</button>
            <button type="submit" class="btn-primary">Mark as Shipped</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Order Cancellation Modal -->
  <div id="cancelOrderModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px; background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 16px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);">
      <div class="modal-header" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border-radius: 16px 16px 0 0; padding: 24px; border-bottom: none;">
        <h2 style="margin: 0; font-size: 1.5rem; font-weight: 700; display: flex; align-items: center; gap: 12px;">
          <span style="font-size: 1.8rem;">❌</span>
          Cancel Order
        </h2>
        <span class="close" onclick="closeCancelOrderModal()" style="color: white; font-size: 2rem; font-weight: 300; opacity: 0.8; transition: opacity 0.2s;">&times;</span>
      </div>
      <div class="modal-body" style="padding: 32px;">
        <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 12px; padding: 16px; margin-bottom: 24px;">
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <span style="font-size: 1.2rem;">⚠️</span>
            <strong style="color: #991b1b;">Warning</strong>
          </div>
          <p style="margin: 0; color: #7f1d1d; font-size: 0.9rem;">This action will cancel the order and initiate a refund process. This action cannot be undone.</p>
        </div>
        
        <form id="cancelOrderForm">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px;">
            <div class="form-group">
              <label for="cancelOrderId" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Order ID</label>
              <input type="text" id="cancelOrderId" name="orderId" readonly style="background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 8px; padding: 12px; font-family: monospace; font-weight: 600; color: #6b7280;">
            </div>
            <div class="form-group">
              <label for="cancelCustomerName" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Customer Name</label>
              <input type="text" id="cancelCustomerName" name="customerName" readonly style="background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 8px; padding: 12px; font-weight: 600; color: #6b7280;">
            </div>
          </div>
          
          <div class="form-group" style="margin-bottom: 24px;">
            <label for="cancellationReason" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Cancellation Reason *</label>
            <select id="cancellationReason" name="reason" required style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; background: white; font-size: 1rem; transition: border-color 0.2s;">
              <option value="">Select a reason</option>
              <option value="customer-request">👤 Customer Request</option>
              <option value="out-of-stock">📦 Out of Stock</option>
              <option value="payment-failed">💳 Payment Failed</option>
              <option value="shipping-issue">🚚 Shipping Issue</option>
              <option value="product-defect">🔧 Product Defect</option>
              <option value="other">❓ Other</option>
            </select>
          </div>
          
          <div class="form-group" style="margin-bottom: 24px;">
            <label for="cancellationNotes" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Additional Notes</label>
            <textarea id="cancellationNotes" name="notes" rows="3" placeholder="Additional details about the cancellation..." style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; background: white; font-size: 1rem; resize: vertical; min-height: 80px; transition: border-color 0.2s;"></textarea>
          </div>
          
          <div class="form-group" style="margin-bottom: 24px;">
            <label for="refundAmount" style="font-weight: 600; color: #374151; margin-bottom: 8px; display: block;">Refund Amount (₹)</label>
            <div style="position: relative;">
              <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280; font-weight: 600;">₹</span>
              <input type="number" id="refundAmount" name="refundAmount" step="0.01" placeholder="Enter refund amount" style="width: 100%; padding: 12px 12px 12px 32px; border: 2px solid #d1d5db; border-radius: 8px; background: white; font-size: 1rem; font-weight: 600; transition: border-color 0.2s;">
            </div>
          </div>
          
          <div class="form-group" style="margin-bottom: 32px;">
            <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 16px; background: #f0f9ff; border: 2px solid #bae6fd; border-radius: 8px; transition: all 0.2s;">
              <input type="checkbox" id="notifyCustomer" name="notifyCustomer" checked style="width: 18px; height: 18px; accent-color: #3b82f6;">
              <div>
                <div style="font-weight: 600; color: #1e40af; margin-bottom: 4px;">📧 Notify Customer</div>
                <div style="font-size: 0.9rem; color: #1e3a8a;">Send email notification about the cancellation and refund</div>
              </div>
            </label>
          </div>
          
          <div class="form-actions" style="display: flex; gap: 16px; justify-content: flex-end;">
            <button type="button" onclick="closeCancelOrderModal()" class="btn-secondary" style="padding: 12px 24px; border-radius: 8px; font-weight: 600; transition: all 0.2s;">Cancel</button>
            <button type="submit" class="btn-danger" style="padding: 12px 24px; border-radius: 8px; font-weight: 600; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border: none; color: white; transition: all 0.2s; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);">
              ❌ Cancel Order
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Affiliate Detail Modal -->
  <div id="affiliateModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>👤 Affiliate Details</h2>
        <span class="close" onclick="closeAffiliateModal()">&times;</span>
      </div>
      <div class="modal-body" id="affiliate-modal-body">
        <div class="loading">
          <div class="loading-spinner"></div>
          <span>Loading affiliate details...</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced Footer Section -->
  <footer class="enhanced-footer">
    <!-- Decorative Background Elements -->
    <div class="footer-bg-elements">
      <div class="footer-wave-1"></div>
      <div class="footer-wave-2"></div>
      <div class="footer-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
      </div>
    </div>
    
    <div class="container footer-inner">
      <!-- Newsletter Section -->
      <div class="footer-newsletter">
        <div class="newsletter-content">
          <div class="newsletter-text">
            <h3>🚀 Stay Updated with ATTRAL</h3>
            <p>Get the latest updates on new products, exclusive offers, and tech innovations delivered to your inbox.</p>
          </div>
          <div class="newsletter-form">
            <div class="input-group">
              <input type="email" placeholder="Enter your email address" class="newsletter-input">
              <button class="newsletter-btn">
                <span>Subscribe</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="22" y1="2" x2="11" y2="13"></line>
                  <polygon points="22,2 15,22 11,13 2,9"></polygon>
                </svg>
              </button>
            </div>
            <p class="newsletter-disclaimer">We respect your privacy. Unsubscribe anytime.</p>
          </div>
        </div>
      </div>

      <!-- Main Footer Content -->
      <div class="footer-content">
        <!-- Company Info Section -->
        <div class="footer-section company-info">
          <div class="footer-logo">
            <div class="logo-icon">⚡</div>
            <h4>ATTRAL</h4>
          </div>
          <p class="company-description">Smart Power. Smarter Living. We provide next-generation consumer electronics to power your lifestyle with cutting-edge GaN technology.</p>
          
          <!-- Enhanced Social Links -->
          <div class="social-links-enhanced">
            <a href="https://facebook.com/attral" target="_blank" rel="noopener" class="social-link facebook" title="Follow us on Facebook">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
              <span>Facebook</span>
            </a>
            <a href="https://instagram.com/attral" target="_blank" rel="noopener" class="social-link instagram" title="Follow us on Instagram">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987s11.987-5.367 11.987-11.987C24.014 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.708 13.744 3.708 12.447s.49-2.448 1.297-3.323c.875-.807 2.026-1.297 3.323-1.297s2.448.49 3.323 1.297c.807.875 1.297 2.026 1.297 3.323s-.49 2.448-1.297 3.323c-.875.807-2.026 1.297-3.323 1.297zm7.83-9.281H7.83c-.49 0-.89.4-.89.89v7.83c0 .49.4.89.89.89h8.449c.49 0 .89-.4.89-.89v-7.83c0-.49-.4-.89-.89-.89z"/>
              </svg>
              <span>Instagram</span>
            </a>
            <a href="https://twitter.com/attral" target="_blank" rel="noopener" class="social-link twitter" title="Follow us on Twitter">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
              </svg>
              <span>Twitter</span>
            </a>
            <a href="https://linkedin.com/company/attral" target="_blank" rel="noopener" class="social-link linkedin" title="Connect on LinkedIn">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
              <span>LinkedIn</span>
            </a>
          </div>
        </div>

        <!-- Quick Links Section -->
        <div class="footer-section">
          <h4>
            <span class="section-icon">🔗</span>
            Quick Links
          </h4>
          <ul class="footer-links">
            <li><a href="index.html"><span class="link-icon">🏠</span> Home</a></li>
            <li><a href="shop.html"><span class="link-icon">🛍️</span> Shop</a></li>
            <li><a href="about.html"><span class="link-icon">ℹ️</span> About Us</a></li>
            <li><a href="contact.html"><span class="link-icon">📞</span> Contact</a></li>
            <li><a href="blog.html" target="_blank" rel="noopener"><span class="link-icon">📝</span> Blog</a></li>
          </ul>
        </div>

        <!-- Support Section -->
        <div class="footer-section">
          <h4>
            <span class="section-icon">🛠️</span>
            Support
          </h4>
          <ul class="footer-links">
            <li><a href="account.html"><span class="link-icon">👤</span> My Account</a></li>
            <li><a href="cart.html"><span class="link-icon">🛒</span> Shopping Cart</a></li>
            <li><a href="affiliates.html"><span class="link-icon">🤝</span> Affiliate Program</a></li>
            <li><a href="my-orders.html"><span class="link-icon">📦</span> Order Tracking</a></li>
            <li><a href="dashboard.html"><span class="link-icon">📊</span> Dashboard</a></li>
          </ul>
        </div>

        <!-- Contact Info Section -->
        <div class="footer-section contact-info">
          <h4>
            <span class="section-icon">📍</span>
            Contact Info
          </h4>
          <div class="contact-details">
            <div class="contact-item">
              <div class="contact-icon">📧</div>
              <div class="contact-text">
                <span class="contact-label">Email</span>
                <a href="mailto:info@attral.in">info@attral.in</a>
              </div>
            </div>
            <div class="contact-item">
              <div class="contact-icon">📱</div>
              <div class="contact-text">
                <span class="contact-label">Phone</span>
                <a href="tel:+918903479870">+91 8903479870</a>
              </div>
            </div>
            <div class="contact-item">
              <div class="contact-icon">📍</div>
              <div class="contact-text">
                <span class="contact-label">Address</span>
                <span>Phase 2 Sathuvachari<br>Vellore - 632009<br>Tamil Nadu, India</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer Bottom -->
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <div class="copyright">
            <p>© <span id="year"></span> <strong>ATTRAL</strong>. All rights reserved.</p>
            <p class="tagline">Powering the Future, One Device at a Time</p>
          </div>
          <nav class="footer-nav">
            <a href="privacy.html" class="nav-link">Privacy Policy</a>
            <a href="terms.html" class="nav-link">Terms of Service</a>
            <a href="sitemap.xml" class="nav-link">Sitemap</a>
            <a href="contact.html" class="nav-link">Support</a>
          </nav>
        </div>
        <div class="footer-badges">
          <div class="badge">🔒 SSL Secured</div>
          <div class="badge">🚀 Fast Shipping</div>
          <div class="badge">💯 Quality Guaranteed</div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/firebase.js"></script>
  <script src="js/dashboard-manager.js"></script>
  <script src="js/dashboard-ui.js"></script>
  <script src="js/dashboard-modals.js"></script>
  <script src="js/dashboard-email.js"></script>
  <script src="js/dashboard-tracking.js"></script>
  <script src="js/dashboard-init.js"></script>
</body>
</html>
